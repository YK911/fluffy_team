import{a as T,i as l}from"./assets/vendor-B4ZCAipb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const C="https://paw-hut.b.goit.study/api",m={animals:"/animals",categories:"/categories",orders:"/orders",feedbacks:"/feedbacks"},g=T.create({baseURL:C}),s={categoryList:document.querySelector(".js-category-list"),petsList:document.querySelector(".js-pets-list"),loader:document.querySelector(".js-loader"),petsLoadMoreBtn:document.querySelector(".js-pets-load-more-btn")};let f=S(),i=1,y,d;document.addEventListener("DOMContentLoaded",j);s.petsLoadMoreBtn.addEventListener("click",O);s.categoryList.addEventListener("click",A);function S(){return window.innerWidth>=1440?9:8}async function j(t){L();try{const e=await R(),o=await h();k(e),$(o),u()}catch(e){console.log(e)}finally{b()}}async function A(t){if(t.target.nodeName!=="BUTTON")return;const e=t.target.textContent;d=t.target.closest("li").dataset.id,i=1,L(),s.categoryList.querySelectorAll(".category-btn").forEach(r=>{r.classList.remove("current")}),t.target.classList.add("current");try{let r=await h();e!=="Всі"&&(r=await w(d,i)),$(r),u()}catch(r){throw l.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"}),r}finally{b()}}async function O(){i+=1,s.loader.classList.add("loader-center"),L();try{if(d){u();const e=await w(d,i),o=p(e);s.petsList.insertAdjacentHTML("beforeend",o)}else{u();const e=await h(i),o=p(e);s.petsList.insertAdjacentHTML("beforeend",o)}const t=s.petsList.querySelector("li");if(t){const e=t.getBoundingClientRect();window.scrollBy({top:e.height,behavior:"smooth"})}}catch(t){throw l.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"}),t}finally{b(),s.loader.classList.remove("loader-center")}}async function R(t){try{return(await g.get(`${m.categories}`)).data}catch(e){throw l.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"}),e}}async function h(){try{const t=await g.get(`${m.animals}`,{params:{limit:f,page:i}});return y=t.data.totalItems,t.data.animals}catch(t){throw l.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"}),t}}async function w(t,e){try{const o=await g.get(`${m.animals}?categoryId=${t}`,{params:{limit:f,page:e}});return y=o.data.totalItems,o.data.animals}catch(o){throw l.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"}),o}}function I(t){return`
     <li class="category-item" data-id="${t._id}">
        <button class="category-btn" type="button">${t.name}</button>
      </li>`}function N(t){return t.reverse().map(I).join("")}function k(t){const e=` <li class="category-item">
        <button class="category-btn current" type="button">Всі</button>
      </li>${N(t)}`;s.categoryList.innerHTML=e}function q({_id:t,name:e,image:o,species:n,age:r,gender:a,categories:c,description:B}){const v=c.map(M=>`<li class="pets-category-item">${M.name}</li>`).join("");return`
     <li class="pets-item" data-id="${t}">
        <img class="pets-img" src="${o}" alt="${e} - ${n}" />
        <div class="pets-list-wrapper">
          <p class="pets-category">${n}</p>
          <h3 class="pets-name">${e}</h3>
          <ul class="pets-category-list">${v}</ul>
          <div class="descriprion-wrapper">
            <ul class="descriprion-list">
              <li class="descriprion-item">${r}</li>
              <li class="descriprion-item">${a}</li>
            </ul>
            <p class="pets-descriprion">${B}</p>
            <button class="pets-button" type="button">Дізнатись більше</button>
          </div>
        </div>
      </li>`}function p(t){return t.map(q).join("")}function $(t){const e=p(t);s.petsList.innerHTML=e}function L(){s.loader.classList.remove("loader-hidden")}function b(){s.loader.classList.add("loader-hidden")}function E(){s.petsLoadMoreBtn.classList.remove("pets-load-more-btn-hidden")}function P(){s.petsLoadMoreBtn.classList.add("pets-load-more-btn-hidden")}function u(){const t=Math.ceil(y/f);i>=t?P():E()}
//# sourceMappingURL=index.js.map
